-- =============================================
-- 综合数据库重建脚本 - 第三部分
-- 课程、考试、练习和学习数据
-- =============================================

-- 使用数据库
USE web_experiment;

-- 插入课程数据 (20门课程)
INSERT INTO `course` (`id`, `title`, `description`, `subject`, `teacher_id`, `cover_image`, `status`, `create_time`) VALUES
(1, '数据结构与算法基础', '计算机科学的核心课程，涵盖线性表、栈、队列、树、图等基础数据结构和排序、查找等算法', '计算机科学', 2, '/images/covers/data-structure.jpg', 'published', '2024-01-15 10:00:00'),
(2, 'Java程序设计', '面向对象编程语言Java的全面学习，包括语法基础、面向对象思想、集合框架、异常处理等', 'Java编程', 2, '/images/covers/java.jpg', 'published', '2024-01-16 10:00:00'),
(3, '数据库系统原理', '关系数据库的理论基础和实践应用，包括SQL语言、数据库设计、事务处理、并发控制等', '数据库', 3, '/images/covers/database.jpg', 'published', '2024-01-17 10:00:00'),
(4, '软件工程', '软件开发的工程化方法，包括需求分析、系统设计、编码实现、测试维护等软件生命周期', '软件工程', 4, '/images/covers/software-eng.jpg', 'published', '2024-01-18 10:00:00'),
(5, '操作系统原理', '计算机操作系统的基本概念和原理，包括进程管理、内存管理、文件系统、I/O管理等', '操作系统', 5, '/images/covers/os.jpg', 'published', '2024-01-19 10:00:00'),
(6, '计算机网络', '计算机网络的体系结构和协议，包括OSI模型、TCP/IP协议族、网络安全等', '计算机网络', 2, '/images/covers/network.jpg', 'published', '2024-01-20 10:00:00'),
(7, '机器学习基础', '人工智能的重要分支，包括监督学习、无监督学习、深度学习的基本理论和算法', '人工智能', 7, '/images/covers/ml.jpg', 'published', '2024-01-21 10:00:00'),
(8, 'Web前端开发', '现代Web前端技术，包括HTML5、CSS3、JavaScript、Vue.js框架的应用开发', 'Web开发', 8, '/images/covers/frontend.jpg', 'published', '2024-01-22 10:00:00'),
(9, '网络安全概论', '信息安全的基本理论和实践，包括密码学、网络攻防、安全协议、安全管理等', '网络安全', 9, '/images/covers/security.jpg', 'published', '2024-01-23 10:00:00'),
(10, '大数据技术与应用', '大数据处理的关键技术，包括Hadoop、Spark、分布式存储、数据挖掘等', '大数据', 10, '/images/covers/bigdata.jpg', 'published', '2024-01-24 10:00:00'),
(11, '移动应用开发', '移动端应用开发技术，包括Android、iOS平台的原生开发和跨平台开发', '移动开发', 11, '/images/covers/mobile.jpg', 'published', '2024-01-25 10:00:00'),
(12, '算法设计与分析', '高级算法设计技术，包括分治、动态规划、贪心、回溯等算法策略', '算法设计', 12, '/images/covers/algorithm.jpg', 'published', '2024-01-26 10:00:00'),
(13, '深度学习', '神经网络和深度学习理论，包括卷积神经网络、循环神经网络、生成对抗网络等', '深度学习', 13, '/images/covers/dl.jpg', 'published', '2024-01-27 10:00:00'),
(14, '云计算技术', '云计算的架构和服务模式，包括虚拟化、容器技术、微服务、云原生应用等', '云计算', 14, '/images/covers/cloud.jpg', 'published', '2024-01-28 10:00:00'),
(15, '物联网技术', '物联网系统的设计和实现，包括传感器网络、通信协议、数据处理、应用开发等', '物联网', 15, '/images/covers/iot.jpg', 'published', '2024-01-29 10:00:00'),
(16, 'Linux系统管理', 'Linux操作系统的使用和管理，包括系统安装、配置、服务管理、脚本编程等', 'Linux系统', 2, '/images/covers/linux.jpg', 'published', '2024-01-30 10:00:00'),
(17, 'Python程序设计', 'Python语言的基础和应用，包括语法基础、数据分析、Web开发、人工智能应用等', 'Python编程', 7, '/images/covers/python.jpg', 'published', '2024-02-01 10:00:00'),
(18, '微服务架构', '现代软件架构设计，包括微服务拆分、服务治理、API网关、容器编排等', '软件架构', 4, '/images/covers/microservice.jpg', 'published', '2024-02-02 10:00:00'),
(19, '区块链技术', '分布式账本技术的原理和应用，包括共识算法、智能合约、加密货币、联盟链等', '区块链', 9, '/images/covers/blockchain.jpg', 'published', '2024-02-03 10:00:00'),
(20, '计算机图形学', '计算机图形学的基本理论和算法，包括几何变换、光照模型、纹理映射、渲染技术等', '图形学', 12, '/images/covers/graphics.jpg', 'published', '2024-02-04 10:00:00');

-- 插入章节数据 (每门课程3-5个章节)
INSERT INTO `chapter` (`course_id`, `title`, `description`, `sort_order`) VALUES
-- 数据结构与算法基础
(1, '线性数据结构', '数组、链表、栈、队列等线性数据结构的原理和实现', 1),
(1, '树形数据结构', '二叉树、平衡树、堆等树形数据结构的概念和应用', 2),
(1, '图论算法', '图的表示方法、遍历算法、最短路径、最小生成树等', 3),
(1, '排序算法', '冒泡排序、快速排序、归并排序、堆排序等排序算法', 4),
(1, '查找算法', '顺序查找、二分查找、哈希查找等查找算法', 5),

-- Java程序设计
(2, 'Java语言基础', 'Java语法、数据类型、控制结构、方法定义等基础知识', 1),
(2, '面向对象编程', '类与对象、继承、多态、封装等面向对象概念', 2),
(2, '异常处理', 'Java异常处理机制、自定义异常、异常处理最佳实践', 3),
(2, '集合框架', 'List、Set、Map等集合类的使用和原理', 4),
(2, '多线程编程', '线程创建、同步机制、线程池等多线程编程技术', 5),

-- 数据库系统原理
(3, '关系数据库理论', '关系模型、关系代数、函数依赖、范式理论等', 1),
(3, 'SQL语言', 'DDL、DML、DCL等SQL语句的语法和应用', 2),
(3, '数据库设计', 'E-R模型、数据库设计方法、设计规范等', 3),
(3, '事务处理', 'ACID特性、并发控制、死锁处理等事务管理', 4),
(3, '数据库优化', '索引设计、查询优化、性能调优等优化技术', 5),

-- 软件工程
(4, '软件工程概论', '软件工程的基本概念、发展历程、方法学等', 1),
(4, '需求工程', '需求获取、需求分析、需求规格说明等需求工程', 2),
(4, '系统设计', '概要设计、详细设计、架构设计等系统设计方法', 3),
(4, '软件测试', '测试理论、测试方法、测试工具、测试管理等', 4),
(4, '项目管理', '软件项目计划、进度控制、质量管理、风险管理等', 5),

-- 操作系统原理
(5, '操作系统概述', '操作系统的功能、结构、发展历程等基本概念', 1),
(5, '进程管理', '进程概念、进程调度、进程同步、进程通信等', 2),
(5, '内存管理', '内存分配、虚拟内存、页面置换算法等内存管理', 3),
(5, '文件系统', '文件系统结构、文件操作、目录管理等文件系统', 4),
(5, 'I/O系统', '设备管理、I/O调度、缓冲技术等I/O系统管理', 5);

-- 插入课时数据 (每个章节3-4个课时)
INSERT INTO `lesson` (`chapter_id`, `title`, `content`, `video_url`, `duration`, `sort_order`) VALUES
-- 数据结构：线性数据结构
(1, '数组与链表', '数组和链表的基本概念、操作实现和性能比较', '/videos/ds/array-list.mp4', 45, 1),
(1, '栈的应用', '栈的定义、实现和在括号匹配、表达式求值中的应用', '/videos/ds/stack.mp4', 40, 2),
(1, '队列与循环队列', '队列的概念、实现和在操作系统、网络中的应用', '/videos/ds/queue.mp4', 35, 3),

-- 数据结构：树形数据结构
(2, '二叉树基础', '二叉树的定义、性质和基本操作实现', '/videos/ds/binary-tree.mp4', 50, 1),
(2, '二叉搜索树', '二叉搜索树的插入、删除、查找操作', '/videos/ds/bst.mp4', 45, 2),
(2, '平衡二叉树', 'AVL树和红黑树的基本概念和平衡操作', '/videos/ds/balanced-tree.mp4', 55, 3),
(2, '堆与优先队列', '堆的性质、建堆过程和在排序中的应用', '/videos/ds/heap.mp4', 40, 4),

-- Java：语言基础
(6, 'Java环境搭建', 'JDK安装配置、IDE使用、第一个Java程序', '/videos/java/setup.mp4', 30, 1),
(6, '基本数据类型', 'Java的8种基本数据类型和类型转换', '/videos/java/datatype.mp4', 35, 2),
(6, '控制结构', '条件语句、循环语句、跳转语句的使用', '/videos/java/control.mp4', 40, 3),
(6, '方法与递归', '方法定义、参数传递、递归算法实现', '/videos/java/method.mp4', 45, 4),

-- Java：面向对象编程
(7, '类与对象', '类的定义、对象的创建和使用、构造方法', '/videos/java/class-object.mp4', 50, 1),
(7, '继承与多态', '继承关系、方法重写、多态的实现机制', '/videos/java/inherit.mp4', 55, 2),
(7, '抽象类与接口', '抽象类和接口的定义、区别和使用场景', '/videos/java/abstract.mp4', 45, 3),
(7, '内部类', '成员内部类、局部内部类、匿名内部类的应用', '/videos/java/inner-class.mp4', 40, 4);

-- 插入考试数据 (每门课程1-2个考试)
INSERT INTO `exam` (`name`, `type`, `duration`, `total_score`, `course_id`, `teacher_id`, `status`, `start_time`, `end_time`) VALUES
('数据结构期中考试', 'midterm', 120, 100, 1, 2, 'published', '2024-04-15 09:00:00', '2024-04-20 23:59:59'),
('数据结构期末考试', 'final', 150, 100, 1, 2, 'published', '2024-06-15 09:00:00', '2024-06-20 23:59:59'),
('Java编程测验', 'quiz', 60, 50, 2, 2, 'published', '2024-04-10 14:00:00', '2024-04-15 23:59:59'),
('Java程序设计期末考试', 'final', 120, 100, 2, 2, 'published', '2024-06-10 09:00:00', '2024-06-15 23:59:59'),
('数据库原理考试', 'midterm', 90, 80, 3, 3, 'published', '2024-04-20 10:00:00', '2024-04-25 23:59:59'),
('软件工程项目考核', 'homework', 240, 100, 4, 4, 'published', '2024-05-01 00:00:00', '2024-05-30 23:59:59'),
('操作系统理论考试', 'midterm', 100, 90, 5, 5, 'published', '2024-04-25 09:00:00', '2024-04-30 23:59:59'),
('计算机网络实验考试', 'quiz', 90, 60, 6, 2, 'published', '2024-04-18 14:00:00', '2024-04-23 23:59:59'),
('机器学习算法测试', 'quiz', 75, 70, 7, 7, 'published', '2024-04-12 15:00:00', '2024-04-17 23:59:59'),
('Web前端技术考核', 'homework', 180, 80, 8, 8, 'published', '2024-04-08 00:00:00', '2024-04-22 23:59:59'),
('网络安全实践考试', 'midterm', 110, 85, 9, 9, 'published', '2024-04-22 10:00:00', '2024-04-27 23:59:59'),
('大数据技术应用考试', 'final', 135, 100, 10, 10, 'published', '2024-06-05 09:00:00', '2024-06-10 23:59:59'),
('移动开发项目答辩', 'homework', 300, 100, 11, 11, 'published', '2024-05-15 00:00:00', '2024-06-15 23:59:59'),
('算法设计期末考试', 'final', 150, 100, 12, 12, 'published', '2024-06-12 09:00:00', '2024-06-17 23:59:59'),
('深度学习理论考试', 'midterm', 120, 90, 13, 13, 'published', '2024-04-28 10:00:00', '2024-05-03 23:59:59'),
('云计算技术实践', 'quiz', 90, 65, 14, 14, 'published', '2024-04-16 14:00:00', '2024-04-21 23:59:59'),
('Linux系统管理考试', 'midterm', 100, 85, 16, 2, 'published', '2024-04-24 09:00:00', '2024-04-29 23:59:59');

-- 插入题目数据 (每个考试5-10道题)
INSERT INTO `question` (`exam_id`, `type`, `content`, `answer`, `analysis`, `score`, `difficulty`, `knowledge_point`, `sort_order`) VALUES
-- 数据结构期中考试题目
(1, 'single_choice', '以下哪种数据结构适合实现函数调用的管理？\nA. 队列\nB. 栈\nC. 链表\nD. 数组', 'B', '函数调用遵循"后进先出"的原则，因此栈是最适合的数据结构。当函数被调用时，其信息被压入栈中；当函数返回时，其信息从栈中弹出。', 10, 'medium', '栈的应用', 1),
(1, 'single_choice', '在一个有n个节点的完全二叉树中，叶子节点的个数是？\nA. n/2\nB. ⌊n/2⌋\nC. ⌈n/2⌉\nD. n-1', 'C', '在完全二叉树中，叶子节点的个数等于⌈n/2⌉。这是因为除了最后一层外，其他层都是满的，最后一层的节点数决定了叶子节点的总数。', 10, 'hard', '二叉树性质', 2),
(1, 'multiple_choice', '关于链表的描述，正确的是？\nA. 链表的插入和删除操作时间复杂度为O(1)\nB. 链表不支持随机访问\nC. 链表需要额外的存储空间存储指针\nD. 链表的空间是连续分配的', 'A,B,C', '链表的优点是插入删除快（O(1)），缺点是不支持随机访问、需要额外指针空间、空间不连续。选项D错误，链表的存储空间是不连续的。', 15, 'medium', '链表特性', 3),
(1, 'true_false', '快速排序的平均时间复杂度是O(n log n)，最坏时间复杂度是O(n²)。', 'true', '快速排序在平均情况下表现良好，时间复杂度为O(n log n)，但在最坏情况下（如已排序的数组），时间复杂度退化为O(n²)。', 10, 'medium', '排序算法复杂度', 4),
(1, 'fill_blank', '在深度优先搜索(DFS)中，通常使用____数据结构来实现，而在广度优先搜索(BFS)中，通常使用____数据结构来实现。', '栈;队列', 'DFS使用栈实现（递归本质上也是栈），遵循深度优先的原则；BFS使用队列实现，遵循广度优先的原则，逐层访问。', 15, 'medium', '图的遍历', 5),

-- Java编程测验题目
(3, 'single_choice', 'Java中，以下哪个关键字用于表示一个类不能被继承？\nA. static\nB. final\nC. abstract\nD. private', 'B', 'final关键字修饰类时表示该类不能被继承，如String类。static用于静态成员，abstract用于抽象类，private用于访问控制。', 5, 'easy', 'Java关键字', 1),
(3, 'single_choice', 'Java中的多态性主要体现在？\nA. 方法重载\nB. 方法重写\nC. 接口实现\nD. 以上都是', 'D', 'Java的多态性体现在多个方面：方法重载（编译时多态）、方法重写（运行时多态）、接口实现等，这些都是多态的表现形式。', 8, 'medium', 'Java多态', 2),
(3, 'multiple_choice', '关于Java异常处理，正确的说法是？\nA. try块后必须跟catch块\nB. finally块中的代码一定会执行\nC. 可以有多个catch块\nD. Exception是所有异常的父类', 'C,D', 'Java异常处理中，try后可以只跟finally而不跟catch；finally块在某些极端情况下可能不执行；可以有多个catch块处理不同异常；Exception确实是大部分异常的父类。', 12, 'medium', 'Java异常处理', 3),
(3, 'true_false', 'Java中的String对象是可变的。', 'false', 'Java中的String对象是不可变的（immutable）。当对String进行修改操作时，实际上是创建了新的String对象，原对象保持不变。', 5, 'easy', 'String特性', 4),
(3, 'essay', '请简述Java中ArrayList和LinkedList的区别，并说明在什么场景下使用哪种更合适。', '', 'ArrayList基于数组实现，支持随机访问，查找快O(1)但插入删除慢O(n)；LinkedList基于链表实现，不支持随机访问，查找慢O(n)但插入删除快O(1)。频繁查找用ArrayList，频繁增删用LinkedList。', 20, 'hard', '集合框架', 5);

-- 插入题目选项数据
INSERT INTO `question_option` (`question_id`, `key`, `content`, `is_correct`, `sort_order`) VALUES
-- 数据结构期中考试第1题选项
(1, 'A', '队列', false, 1),
(1, 'B', '栈', true, 2),
(1, 'C', '链表', false, 3),
(1, 'D', '数组', false, 4),

-- 数据结构期中考试第2题选项
(2, 'A', 'n/2', false, 1),
(2, 'B', '⌊n/2⌋', false, 2),
(2, 'C', '⌈n/2⌉', true, 3),
(2, 'D', 'n-1', false, 4),

-- 数据结构期中考试第3题选项
(3, 'A', '链表的插入和删除操作时间复杂度为O(1)', true, 1),
(3, 'B', '链表不支持随机访问', true, 2),
(3, 'C', '链表需要额外的存储空间存储指针', true, 3),
(3, 'D', '链表的空间是连续分配的', false, 4),

-- Java编程测验第1题选项
(6, 'A', 'static', false, 1),
(6, 'B', 'final', true, 2),
(6, 'C', 'abstract', false, 3),
(6, 'D', 'private', false, 4),

-- Java编程测验第2题选项
(7, 'A', '方法重载', false, 1),
(7, 'B', '方法重写', false, 2),
(7, 'C', '接口实现', false, 3),
(7, 'D', '以上都是', true, 4),

-- Java编程测验第3题选项
(8, 'A', 'try块后必须跟catch块', false, 1),
(8, 'B', 'finally块中的代码一定会执行', false, 2),
(8, 'C', '可以有多个catch块', true, 3),
(8, 'D', 'Exception是所有异常的父类', true, 4);

-- 插入练习数据
INSERT INTO `practice` (`title`, `description`, `type`, `difficulty`, `duration`, `question_count`, `course_id`, `status`) VALUES
('线性表基础练习', '数组和链表的基本操作练习题', 'algorithm', 'easy', 30, 10, 1, 'published'),
('栈和队列应用', '栈和队列在实际问题中的应用练习', 'algorithm', 'medium', 45, 8, 1, 'published'),
('Java语法基础练习', 'Java基本语法和面向对象概念练习', 'programming', 'easy', 25, 12, 2, 'published'),
('Java集合框架练习', 'Java集合类的使用和应用练习', 'programming', 'medium', 40, 10, 2, 'published'),
('SQL查询练习', '基本SQL查询语句的编写练习', 'database', 'easy', 35, 15, 3, 'published'),
('数据库设计练习', 'E-R图设计和数据库建模练习', 'database', 'hard', 60, 6, 3, 'published'),
('软件需求分析', '软件需求获取和分析的案例练习', 'system_design', 'medium', 50, 8, 4, 'published'),
('系统架构设计', '大型系统的架构设计练习', 'system_design', 'hard', 90, 5, 4, 'published'),
('进程调度算法', '操作系统进程调度算法的实现练习', 'algorithm', 'hard', 70, 6, 5, 'published'),
('网络协议分析', 'TCP/IP协议栈的理解和应用练习', 'algorithm', 'medium', 55, 8, 6, 'published'); 